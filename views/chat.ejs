<!DOCTYPE html>
<html>
<head>
	<title>CNL 11 | CHAT</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
	<link rel="stylesheet" type="text/css" href="/chat.css">
	<script type="text/javascript" src="/libs/angular.min.js"></script>

	<script>var App = angular.module('app', []);</script>
</head>

<body ng-app="app">
	<div ng-controller="chatCtrl" ng-init="initialize()" class="topnav">
		<a href="/home">Home</a>
		<a href="/login">Login</a>
		<a href="/register">Register</a>
		<a class="active" href="/chat">Chat</a>
	</div>

	<div class="box">
		<div class="header">
			<p align="center">Lebron James<br align="center">31y, Male</br></p>
		</div>

		<div id = "chat-container" class="chat-container">
			<div class="chat friend">
				<div class="user-photo"><img src="images/james.jpg"></div>
				<p class="chat-message">How are you?</p>				
			</div>
			<div class="chat self">
				<div class="user-photo"><img src="images/curry.jpg"></div>
				<p class="chat-message">Fine, thx!</p>				
			</div>
			<div class="chat friend">
				<div class="user-photo"><img src="images/james.jpg"></div>
				<p class="chat-message">How old are you?</p>			
			</div>
			<div class="chat friend">
				<div class="user-photo"><img src="images/james.jpg"></div>
				<p class="chat-message">And how tall are you?</p>				
			</div>
			<div class="chat friend">
				<div class="user-photo"><img src="images/james.jpg"></div>
				<p class="chat-message">Hello World!</p>				
			</div>
		</div>

		<div class="chat-form">
			<textarea id="myTextarea" placeholder="Type your message" onkeypress="sendMesByEnter()"></textarea>
			<input type="submit" value="Send" class="send" onclick="sendMes()">
		</div>
	</div>

	<script>
		function sendMesByEnter() {
			if (window.event.keyCode == 13 && document.getElementById("myTextarea").value) {
				var image = document.createElement("div");
				var userImage = new Image();
				userImage.src = "images/curry.jpg";
				image.appendChild(userImage);
				image.className = "user-photo";

				var message = document.createElement("p");
				message.innerHTML = document.getElementById("myTextarea").value;		
				message.className = "chat-message";
				document.getElementById("myTextarea").value = "";
				
				var container = document.createElement("div");
				container.appendChild(image);
				container.appendChild(message);
				container.className = "chat self";

				document.getElementById("chat-container").appendChild(container);
			}
		}
	</script>

	<script>
		function sendMes() {
			if (document.getElementById("myTextarea").value) {
				var image = document.createElement("div");
				var userImage = new Image();
				userImage.src = "images/curry.jpg";
				image.appendChild(userImage);
				image.className = "user-photo";

				var message = document.createElement("p");
				message.innerHTML = document.getElementById("myTextarea").value;		
				message.className = "chat-message";
				document.getElementById("myTextarea").value = "";
				
				var container = document.createElement("div");
				container.appendChild(image);
				container.appendChild(message);
				container.className = "chat self";

				document.getElementById("chat-container").appendChild(container);
			}
		}
	</script>
	<script>
		App.controller('chatCtrl', function(
			$scope,
			$rootScope,
			$http
		) {
			$scope.initialize = function(){
				console.log("44444")
			}
		})
	</script>
</body>
</html>